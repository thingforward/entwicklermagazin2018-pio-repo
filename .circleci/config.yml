--- 
version: 2
jobs:
    build:
      image: debian:9
      steps:
        - run: sudo pip install -U platformio
        - run: platformio platform install espressif8266
        - run: pio run -e native
    test:
      image: debian:9
      steps:
        - run: sudo pip install -U platformio
        - run: platformio platform install espressif8266
        - run: pio test -e native 
    flash:
      image: debian:9
      steps:
        - run: sudo pip install -U platformio
        - run: platformio platform install espressif8266
        - pio remote -a "remote-1" run -t upload
workflows:
  version: 2
  build_and_test:
    jobs:
      - build:
      - test:
          requires:
            - build
